def updateSummary;
elifeUpdatePipeline(
    { commit ->
        lock('end2end') {
            sh "cd ${env.SPECTRUM_PREFIX}; sudo -H -u elife ${env.SPECTRUM_PREFIX}checkout.sh master"
            # TODO: need sudoers
            updateSummary = sh("cd ${env.SPECTRUM_PREFIX}; sudo -H -u elife ${env.SPECTRUM_PREFIX}update-kitchen-sinks.sh", returnStdout: true).trim().tr("\n", ", ")
    },
    {
        return "Updated kitchen sinks to ${updateSummary}"
    },
    'update_kitchen_sinks_'
)
